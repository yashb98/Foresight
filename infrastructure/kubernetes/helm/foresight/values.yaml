# FORESIGHT Helm Chart — Default Values
# Override with: helm install foresight ./foresight -f values.production.yaml

# ─────────────────────────────────────────────────────────────────────────────
# Global
# ─────────────────────────────────────────────────────────────────────────────
global:
  environment: production
  imageRegistry: ghcr.io
  imageTag: latest
  imagePullPolicy: Always

# ─────────────────────────────────────────────────────────────────────────────
# FastAPI Backend
# ─────────────────────────────────────────────────────────────────────────────
api:
  enabled: true
  image:
    repository: foresight/foresight-api
    tag: ""          # Defaults to global.imageTag
  replicaCount: 3
  resources:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 2Gi
  autoscaling:
    enabled: true
    minReplicas: 3
    maxReplicas: 12
    targetCPUUtilizationPercentage: 65
  service:
    type: ClusterIP
    port: 8000
  ingress:
    enabled: true
    className: nginx
    host: api.foresight.example.com
    tls: true
    certIssuer: letsencrypt-prod
  env:
    ENVIRONMENT: production
    LOG_LEVEL: INFO
  # Secret references (created separately or via External Secrets)
  secrets:
    databaseUrl:
      secretName: foresight-db-secret
      key: database-url
    mongoUrl:
      secretName: foresight-mongo-secret
      key: mongo-url
    jwtSecretKey:
      secretName: foresight-jwt-secret
      key: jwt-secret-key

# ─────────────────────────────────────────────────────────────────────────────
# React Dashboard
# ─────────────────────────────────────────────────────────────────────────────
dashboard:
  enabled: true
  image:
    repository: foresight/foresight-dashboard
    tag: ""
  replicaCount: 2
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 256Mi
  service:
    type: ClusterIP
    port: 80
  ingress:
    enabled: true
    host: app.foresight.example.com
    tls: true

# ─────────────────────────────────────────────────────────────────────────────
# Streaming Workers
# ─────────────────────────────────────────────────────────────────────────────
streaming:
  enabled: true
  image:
    repository: foresight/foresight-streaming
    tag: ""
  replicaCount: 2
  resources:
    requests:
      cpu: 500m
      memory: 1Gi
    limits:
      cpu: 2000m
      memory: 4Gi

# ─────────────────────────────────────────────────────────────────────────────
# Monitoring
# ─────────────────────────────────────────────────────────────────────────────
monitoring:
  enabled: true
  serviceMonitor:
    enabled: true
    interval: 15s
  prometheusRules:
    enabled: true

# ─────────────────────────────────────────────────────────────────────────────
# Network Policies
# ─────────────────────────────────────────────────────────────────────────────
networkPolicy:
  enabled: true
