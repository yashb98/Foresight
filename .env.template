# =============================================================================
# FORESIGHT â€” Environment Configuration Template
# Copy to .env and fill all values. NEVER commit .env to version control.
# =============================================================================

# --- Project ---
COMPOSE_PROJECT_NAME=foresight
ENVIRONMENT=development

# --- PostgreSQL ---
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=foresight
POSTGRES_USER=foresight_user
POSTGRES_PASSWORD=change_me_postgres_password
DATABASE_URL=postgresql+asyncpg://foresight_user:change_me_postgres_password@postgres:5432/foresight
DATABASE_URL_SYNC=postgresql://foresight_user:change_me_postgres_password@postgres:5432/foresight
# Airflow gets its own DB in same PostgreSQL instance
AIRFLOW_DB=airflow
# MLflow gets its own DB
MLFLOW_DB=mlflow

# --- MongoDB ---
MONGO_HOST=mongodb
MONGO_PORT=27017
MONGO_DB=foresight
MONGO_ROOT_USER=root
MONGO_ROOT_PASSWORD=change_me_mongo_password
MONGO_URI=mongodb://root:change_me_mongo_password@mongodb:27017/foresight?authSource=admin

# --- Kafka ---
KAFKA_BOOTSTRAP_SERVERS=kafka:9092
KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181
KAFKA_TOPIC_SENSOR_DATA=sensor-readings
KAFKA_TOPIC_ALERTS=asset-alerts
KAFKA_TOPIC_MAINTENANCE=maintenance-events
KAFKA_CONSUMER_GROUP=foresight-streaming
KAFKA_REPLICATION_FACTOR=1
KAFKA_NUM_PARTITIONS=6

# --- MinIO (S3-compatible) ---
MINIO_ENDPOINT=minio:9000
MINIO_CONSOLE_PORT=9001
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=change_me_minio_password
MINIO_BUCKET_RAW=foresight-raw
MINIO_BUCKET_PROCESSED=foresight-processed
MINIO_BUCKET_MODELS=foresight-models
# Used by Spark / boto3
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=change_me_minio_password
AWS_ENDPOINT_URL=http://minio:9000
AWS_DEFAULT_REGION=us-east-1

# --- Spark ---
SPARK_MASTER_URL=spark://spark-master:7077
SPARK_MASTER_WEB_UI_PORT=8080
SPARK_WORKER_WEB_UI_PORT=8081
SPARK_WORKER_CORES=2
SPARK_WORKER_MEMORY=2g
SPARK_DRIVER_MEMORY=1g
SPARK_EXECUTOR_MEMORY=1g

# --- Airflow ---
AIRFLOW__CORE__EXECUTOR=LocalExecutor
AIRFLOW__CORE__SQL_ALCHEMY_CONN=postgresql+psycopg2://foresight_user:change_me_postgres_password@postgres:5432/airflow
AIRFLOW__CORE__FERNET_KEY=change_me_fernet_key_must_be_32_bytes_base64_encoded
AIRFLOW__WEBSERVER__SECRET_KEY=change_me_airflow_webserver_secret
AIRFLOW__WEBSERVER__EXPOSE_CONFIG=False
AIRFLOW__LOGGING__LOGGING_LEVEL=INFO
AIRFLOW_ADMIN_USERNAME=admin
AIRFLOW_ADMIN_PASSWORD=change_me_airflow_password
AIRFLOW_ADMIN_EMAIL=admin@foresight.io

# --- MLflow ---
MLFLOW_TRACKING_URI=http://mlflow:5000
MLFLOW_S3_ENDPOINT_URL=http://minio:9000
MLFLOW_ARTIFACT_STORE=s3://foresight-models/mlflow
MLFLOW_BACKEND_STORE_URI=postgresql://foresight_user:change_me_postgres_password@postgres:5432/mlflow

# --- FastAPI ---
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_LOG_LEVEL=info
API_RELOAD=true
JWT_SECRET_KEY=change_me_jwt_secret_min_32_characters_long
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# --- Dashboard ---
VITE_API_BASE_URL=http://localhost:8000
VITE_WS_BASE_URL=ws://localhost:8000

# --- Logging ---
LOG_LEVEL=INFO
LOG_FORMAT=json

# --- ML ---
MODEL_CHAMPION_METRIC=roc_auc
MODEL_MIN_IMPROVEMENT_THRESHOLD=0.01
FAILURE_PREDICTION_WINDOW_7D=7
FAILURE_PREDICTION_WINDOW_30D=30

# --- Alerting (optional) ---
ALERT_EMAIL_SMTP_HOST=smtp.example.com
ALERT_EMAIL_SMTP_PORT=587
ALERT_EMAIL_FROM=alerts@foresight.io
ALERT_EMAIL_PASSWORD=change_me
ALERT_SLACK_WEBHOOK_URL=https://hooks.slack.com/services/change/me
